<?xml version="1.0" encoding="UTF-8"?>
<svg width="900" height="600" viewBox="0 0 900 600" xmlns="http://www.w3.org/2000/svg" style="font-family:Arial,Helvetica,sans-serif;">
  <!-- Background -->
  <rect width="100%" height="100%" fill="#f8f9fa"/>

  <!-- Title -->
  <text x="450" y="40" text-anchor="middle" font-size="24" font-weight="bold" fill="#2c3e50">Pipeline CI/CD – AI Systems </text>

  <!-- Local Dev -->
  <g transform="translate(50,80)">
    <rect x="0" y="0" width="150" height="80" rx="12" fill="#e3f2fd" stroke="#2196f3" stroke-width="2"/>
    <text x="75" y="30" text-anchor="middle" font-size="14" font-weight="bold" fill="#1565c0">DEV LOCAL</text>
    <text x="75" y="50" text-anchor="middle" font-size="11" fill="#1976d2">pre-commit</text>
    <text x="75" y="65" text-anchor="middle" font-size="11" fill="#1976d2">lint + unit</text>
  </g>

  <!-- Arrow down -->
  <path d="M 125 160 L 125 180 M 115 170 L 125 180 L 135 170" fill="none" stroke="#555" stroke-width="2"/>

  <!-- Feature Branch -->
  <g transform="translate(50,200)">
    <rect x="0" y="0" width="150" height="80" rx="12" fill="#fff3e0" stroke="#ff9800" stroke-width="2"/>
    <text x="75" y="30" text-anchor="middle" font-size="14" font-weight="bold" fill="#e65100">FEATURE</text>
    <text x="75" y="50" text-anchor="middle" font-size="11" fill="#f57c00">build + unit</text>
    <text x="75" y="65" text-anchor="middle" font-size="11" fill="#f57c00"></text>
  </g>

  <!-- Arrow right -->
  <path d="M 200 240 L 250 240 M 240 230 L 250 240 L 240 250" fill="none" stroke="#555" stroke-width="2"/>

  <!-- Merge Request -->
  <g transform="translate(270,200)">
    <rect x="0" y="0" width="150" height="80" rx="12" fill="#fff3e0" stroke="#ff9800" stroke-width="2"/>
    <text x="75" y="30" text-anchor="middle" font-size="14" font-weight="bold" fill="#e65100">Merge Request</text>
    <text x="75" y="50" text-anchor="middle" font-size="11" fill="#f57c00">contract + container scanning</text>
    <text x="75" y="65" text-anchor="middle" font-size="11" fill="#f57c00">review → auto-merge</text>
  </g>

  <!-- Arrow down -->
  <path d="M 345 280 L 345 300 M 335 290 L 345 300 L 355 290" fill="none" stroke="#555" stroke-width="2"/>

  <!-- Main Pipeline -->
  <g transform="translate(270,320)">
    <rect x="0" y="0" width="150" height="100" rx="12" fill="#e8f5e9" stroke="#4caf50" stroke-width="2"/>
    <text x="75" y="30" text-anchor="middle" font-size="14" font-weight="bold" fill="#2e7d32">MAIN</text>
    <text x="75" y="48" text-anchor="middle" font-size="11" fill="#388e3c">full test</text>
    <text x="75" y="63" text-anchor="middle" font-size="11" fill="#388e3c">perf + trivy</text>
    <text x="75" y="78" text-anchor="middle" font-size="11" fill="#388e3c">cosign sign</text>
    <text x="75" y="93" text-anchor="middle" font-size="11" fill="#388e3c">push registry</text>
  </g>

  <!-- Arrow right -->
  <path d="M 420 370 L 470 370 M 460 360 L 470 370 L 460 380" fill="none" stroke="#555" stroke-width="2"/>

  <!-- Staging -->
  <g transform="translate(490,320)">
    <rect x="0" y="0" width="150" height="100" rx="12" fill="#e0f7fa" stroke="#00acc1" stroke-width="2"/>
    <text x="75" y="30" text-anchor="middle" font-size="14" font-weight="bold" fill="#006064">STAGING</text>
    <text x="75" y="48" text-anchor="middle" font-size="11" fill="#00838f">auto-deploy</text>
    <text x="75" y="63" text-anchor="middle" font-size="11" fill="#00838f">smoke + sanity</text>
    <text x="75" y="78" text-anchor="middle" font-size="11" fill="#00838f">perf + security</text>
    <text x="75" y="93" text-anchor="middle" font-size="11" fill="#00838f">synthetic ON</text>
  </g>

  <!-- Arrow down -->
  <path d="M 565 420 L 565 440 M 555 430 L 565 440 L 575 430" fill="none" stroke="#555" stroke-width="2"/>

  <!-- Prod Approval -->
  <g transform="translate(490,460)">
    <rect x="0" y="0" width="150" height="60" rx="12" fill="#fce4ec" stroke="#e91e63" stroke-width="2"/>
    <text x="75" y="30" text-anchor="middle" font-size="14" font-weight="bold" fill="#880e4f">PROD APPROVAL</text>
    <text x="75" y="48" text-anchor="middle" font-size="11" fill="#c2185b">manual gate</text>
  </g>

  <!-- Arrow down -->
  <path d="M 565 520 L 565 540 M 555 530 L 565 540 L 575 530" fill="none" stroke="#555" stroke-width="2"/>

  <!-- Canary + Prod -->
  <g transform="translate(700,80)">
    <rect x="0" y="0" width="160" height="460" rx="15" fill="#ffebee" stroke="#d32f2f" stroke-width="3"/>
    <text x="80" y="35" text-anchor="middle" font-size="16" font-weight="bold" fill="#b71c1c">PRODUZIONE</text>
    
    <!-- Canary -->
    <rect x="10" y="55" width="140" height="120" rx="10" fill="#fff8e1" stroke="#ffb300" stroke-width="1.5"/>
    <text x="80" y="80" text-anchor="middle" font-size="13" font-weight="bold" fill="#ff6f00">CANARY</text>
    <text x="80" y="100" text-anchor="middle" font-size="10" fill="#e65100">5% → monitor 10m</text>
    <text x="80" y="115" text-anchor="middle" font-size="10" fill="#e65100">25% → 20m</text>
    <text x="80" y="130" text-anchor="middle" font-size="10" fill="#e65100">50% → 30m</text>
    <text x="80" y="145" text-anchor="middle" font-size="10" fill="#e65100">100%</text>

    <!-- Post-Deploy -->
    <rect x="10" y="185" width="140" height="80" rx="10" fill="#e8f5e9" stroke="#43a047" stroke-width="1.5"/>
    <text x="80" y="210" text-anchor="middle" font-size="13" font-weight="bold" fill="#2e7d32">POST-DEPLOY</text>
    <text x="80" y="230" text-anchor="middle" font-size="10" fill="#388e3c">smoke prod</text>
    <text x="80" y="245" text-anchor="middle" font-size="10" fill="#388e3c">health check</text>
    <text x="80" y="260" text-anchor="middle" font-size="10" fill="#388e3c">auto-rollback</text>

    <!-- Monitoring -->
    <rect x="10" y="275" width="140" height="160" rx="10" fill="#e3f2fd" stroke="#1976d2" stroke-width="1.5"/>
    <text x="80" y="300" text-anchor="middle" font-size="13" font-weight="bold" fill="#0d47a1">MONITORING 24/7</text>
    <text x="80" y="320" text-anchor="middle" font-size="10" fill="#1565c0">RUM</text>
    <text x="80" y="335" text-anchor="middle" font-size="10" fill="#1565c0">synthetic 5m</text>
    <text x="80" y="350" text-anchor="middle" font-size="10" fill="#1565c0">tracing</text>
    <text x="80" y="365" text-anchor="middle" font-size="10" fill="#1565c0">logs</text>
    <text x="80" y="380" text-anchor="middle" font-size="10" fill="#1565c0">alert</text>
    <text x="80" y="415" text-anchor="middle" font-size="9" fill="#1976d2">Golden Signals</text>
  </g>

  <!-- Legend -->
  <g transform="translate(50,540)">
    <text x="0" y="0" font-size="12" font-weight="bold" fill="#2c3e50">Legenda</text>
    <rect x="0" y="10" width="15" height="15" rx="4" fill="#e3f2fd" stroke="#2196f3"/>
    <text x="25" y="22" font-size="11" fill="#333">Dev Locale</text>
    
    <rect x="120" y="10" width="15" height="15" rx="4" fill="#fff3e0" stroke="#ff9800"/>
    <text x="145" y="22" font-size="11" fill="#333">CI (Feature/MR)</text>
    
    <rect x="240" y="10" width="15" height="15" rx="4" fill="#e8f5e9" stroke="#4caf50"/>
    <text x="265" y="22" font-size="11" fill="#333">Main Build</text>
    
    <rect x="360" y="10" width="15" height="15" rx="4" fill="#e0f7fa" stroke="#00acc1"/>
    <text x="385" y="22" font-size="11" fill="#333">Staging Auto</text>
    
    <rect x="480" y="10" width="15" height="15" rx="4" fill="#fce4ec" stroke="#e91e63"/>
    <text x="505" y="22" font-size="11" fill="#333">Prod Gate</text>
    
    <rect x="600" y="10" width="15" height="15" rx="4" fill="#ffebee" stroke="#d32f2f"/>
    <text x="625" y="22" font-size="11" fill="#333">Produzione</text>
  </g>

  <!-- Footer -->
  <text x="450" y="580" text-anchor="middle" font-size="11" fill="#7f8c8d">
    DORA Elite Target: Daily Deploy • &lt;1 giorno Lead Time • &lt;10% CFR • &lt;1h MTTR
  </text>
</svg>
